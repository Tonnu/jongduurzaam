"use strict";function escapeEmailAddress(a){return a?(a=a.toLowerCase(),a=a.replace(/\./g,",")):!1}var app=angular.module("jongduurzaamApp",["ngCookies","ngResource","ngSanitize","ngRoute","firebase"]).constant("FIREBASE_URL","toonverbeek.firebaseio.com").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"PetitionCtrl"}).otherwise({redirectTo:"/"})}]);app.controller("PetitionCtrl",["$scope","Petition",function(a,b){a.petition={name:"",email:"",text:""},a.petitions=b.all,a.amountOfPetitions=a.petitions.$getIndex().length,a.submit=function(){b.create(a.petition).then(function(){console.log(a.petitions.count()+" have already signed up."),a.successsful=!0,a.petition={name:"",email:"",text:""},a.amountOfPetitions=a.petitions.$getIndex().length,console.log(b.all.$getIndex().length)})},a.init=function(){a.amountOfPetitions=a.petitions.$getIndex().length}}]),app.factory("Petition",["$firebase","FIREBASE_URL",function(a,b){var c=new Firebase(b+"/jongduurzaam"),d=a(c),e={all:d,create:function(a){for(var b=d.$getIndex(),c=!1,e=0;e<b.length;e++)if(console.log(d[b[e].email]),d[b[e]].email===a.email){console.log("found email key"+a.email),c=!0;break}return c?($("#alert-placeholder-success").hide(),$("#alert-placeholder-failure").show(),new Error("Dit e-mail adres staat al geregistreerd in ons systeem!")):($("#alert-placeholder-failure").hide(),$("#alert-placeholder-success").show(),d.$add(a))},"delete":function(a){return d.$remove(a)},find:function(a){return d.$child(a)},update:function(){},count:function(){for(;0===d.$getIndex(););return d.$getIndex().length}};return e}]);